# Setup Guide - Windows

Complete installation and setup instructions for Windows development environment.

## Prerequisites

### Required Software

1. **Python 3.11+**
   - Download from: https://www.python.org/downloads/
   - During installation: Check "Add Python to PATH"
   - Verify: `python --version` in Command Prompt

2. **PostgreSQL 15+**
   - Download from: https://www.postgresql.org/download/windows/
   - Default port: 5432
   - Remember the password you set for `postgres` user

3. **Git**
   - Download from: https://git-scm.com/download/win
   - Use default settings during installation
   - Verify: `git --version`

4. **VS Code**
   - Download from: https://code.visualstudio.com/
   - Recommended extensions:
     - Python (Microsoft)
     - PostgreSQL (Chris Kolkman)
     - GitLens

### Optional but Recommended

- **pgAdmin 4**: GUI for PostgreSQL (comes with PostgreSQL installer)
- **Windows Terminal**: Better terminal experience
- **Git Bash**: Unix-like terminal on Windows

## Step-by-Step Setup

### 1. PostgreSQL Installation

**Install PostgreSQL:**

1. Run the installer downloaded from PostgreSQL website
2. Follow installation wizard:
   - Port: 5432 (default)
   - Locale: Default
   - Set password for `postgres` superuser (remember this!)
3. Install pgAdmin 4 when prompted

**Create Database:**

Open pgAdmin 4 or use command line:

```cmd
# Using psql command line
psql -U postgres

# In psql prompt:
CREATE DATABASE trading_ai;

# Create dedicated user (recommended)
CREATE USER trading_user WITH PASSWORD 'your_secure_password';

# Grant privileges
GRANT ALL PRIVILEGES ON DATABASE trading_ai TO trading_user;

# Exit psql
\q
```

**Verify Connection:**

```cmd
psql -U trading_user -d trading_ai
# Enter password when prompted
# Should connect successfully
\q
```

### 2. Project Setup

**Clone/Create Project Directory:**

```cmd
# Navigate to your projects folder
cd C:\Users\jonat\OneDrive\Desktop\ai\projects

# Directory already exists (trading-ai)
cd trading-ai
```

**Create Virtual Environment:**

```cmd
# Create virtual environment
python -m venv venv

# Activate virtual environment
venv\Scripts\activate

# You should see (venv) in your prompt
```

**Important**: Always activate the virtual environment before working on the project!

### 3. Install Python Dependencies

**Create requirements.txt** (will be generated, but here's the content):

```txt
# Core
pandas==2.2.0
numpy==1.26.3
python-dotenv==1.0.0

# Database
sqlalchemy==2.0.25
psycopg2-binary==2.9.9
alembic==1.13.1

# Data Sources
yfinance==0.2.36
requests==2.31.0

# Technical Analysis
pandas-ta==0.3.14b0

# Visualization
plotly==5.18.0
mplfinance==0.12.10b0
matplotlib==3.8.2

# Dashboard (future)
streamlit==1.31.0

# Development
pytest==8.0.0
pytest-cov==4.1.0
black==24.1.1
flake8==7.0.0

# Utilities
tqdm==4.66.1
```

**Install Dependencies:**

```cmd
# Make sure venv is activated
pip install -r requirements.txt

# This will take a few minutes
```

**Verify Installation:**

```cmd
python -c "import pandas; import sqlalchemy; print('Success!')"
```

### 4. Environment Configuration

**Create .env file:**

```cmd
# In project root, create .env file
# Use VS Code or any text editor
```

**Add to .env:**

```env
# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=trading_ai
DB_USER=trading_user
DB_PASSWORD=your_secure_password

# Data Sources
TWELVE_DATA_API_KEY=  # Leave empty if using yfinance

# Risk Management
RISK_PER_TRADE_PCT=1.0
INITIAL_CAPITAL=800

# Trading Parameters
DEFAULT_SPREAD_EUR=0.0002  # 2 pips
DEFAULT_SPREAD_GBP=0.0003  # 3 pips
DEFAULT_SPREAD_XAU=0.50    # 50 cents

# Logging
LOG_LEVEL=INFO
LOG_FILE=logs/trading_ai.log

# Environment
ENV=development  # development, production
```

**Security**: Never commit `.env` to git!

### 5. Initialize Database Schema

**Run database setup script:**

```cmd
# This will create all tables
python scripts/setup_database.py
```

**Verify Tables Created:**

```cmd
# Connect to database
psql -U trading_user -d trading_ai

# List tables
\dt

# Should see: market_data, indicators, signals, backtest_trades, backtest_runs, live_trades

# Exit
\q
```

### 6. Initialize Git Repository

**Set up version control:**

```cmd
# Initialize git (if not already done)
git init

# Create .gitignore
# (will be generated by setup script)

# Initial commit
git add .
git commit -m "Initial project setup"
```

**Create .gitignore:**

```gitignore
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
venv/
env/
ENV/

# Environment
.env
.env.local

# IDE
.vscode/
.idea/
*.swp
*.swo

# Data
data/raw/*.csv
data/processed/*.csv

# Logs
logs/*.log

# Database
*.db
*.sqlite

# OS
.DS_Store
Thumbs.db

# Jupyter
.ipynb_checkpoints/

# Testing
.pytest_cache/
.coverage
htmlcov/

# Distribution
dist/
build/
*.egg-info/
```

### 7. Verify Setup

**Run verification script:**

```cmd
python scripts/verify_setup.py
```

**Expected output:**

```
✓ Python version: 3.11.x
✓ Virtual environment: Active
✓ Database connection: Success
✓ Required packages: All installed
✓ Project structure: Complete
✓ Environment variables: Loaded

Setup verification complete!
```

## Project Structure Verification

After setup, your directory should look like this:

```
trading-ai/
├── .env                      # ✓ Created (not in git)
├── .gitignore                # ✓ Created
├── README.md                 # ✓ Created
├── ARCHITECTURE.md           # ✓ Created
├── SETUP.md                  # ✓ Created (this file)
├── STRATEGY.md               # ✓ Created
├── DEVELOPMENT_ROADMAP.md    # ✓ Created
├── requirements.txt          # ✓ Created
├── config.py                 # ✓ Created
│
├── venv/                     # ✓ Virtual environment
│
├── data/
│   ├── raw/
│   └── processed/
│
├── database/
│   ├── __init__.py
│   ├── models.py
│   ├── connection.py
│   └── schema.sql
│
├── ingestion/
│   ├── __init__.py
│   ├── data_fetcher.py
│   ├── data_validator.py
│   └── data_loader.py
│
├── analysis/
│   ├── __init__.py
│   ├── indicators.py
│   └── signal_generator.py
│
├── strategy/
│   ├── __init__.py
│   ├── base_strategy.py
│   ├── ema_pullback_strategy.py
│   └── risk_management.py
│
├── backtesting/
│   ├── __init__.py
│   ├── backtest_engine.py
│   ├── trade_simulator.py
│   └── performance_metrics.py
│
├── visualization/
│   ├── __init__.py
│   ├── charts.py
│   └── performance_plots.py
│
├── utils/
│   ├── __init__.py
│   ├── helpers.py
│   ├── logger.py
│   └── constants.py
│
├── scripts/
│   ├── setup_database.py
│   ├── verify_setup.py
│   ├── download_historical.py
│   ├── run_backtest.py
│   └── generate_report.py
│
├── tests/
│   ├── __init__.py
│   ├── test_indicators.py
│   ├── test_strategy.py
│   └── test_backtest.py
│
└── logs/
    └── .gitkeep
```

## Common Issues & Solutions

### Issue: "psycopg2 installation failed"

**Solution:**
```cmd
# Use binary version instead
pip install psycopg2-binary
```

### Issue: "Python not found" in CMD

**Solution:**
- Reinstall Python and check "Add to PATH"
- Or manually add Python to PATH:
  - Search "Environment Variables" in Windows
  - Add: `C:\Users\YourName\AppData\Local\Programs\Python\Python311`

### Issue: "Permission denied" when creating database

**Solution:**
```cmd
# Run psql as postgres superuser
psql -U postgres

# Then create database and user
```

### Issue: Virtual environment activation not working

**Solution:**
```cmd
# If using PowerShell and getting execution policy error
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# Then activate
venv\Scripts\activate
```

### Issue: "Can't connect to PostgreSQL"

**Solution:**
1. Check PostgreSQL service is running:
   - Windows Services → postgresql-x64-15
2. Verify port 5432 is not blocked by firewall
3. Check credentials in .env file

## VS Code Setup

### Recommended Settings

Create `.vscode/settings.json`:

```json
{
    "python.defaultInterpreterPath": "${workspaceFolder}\\venv\\Scripts\\python.exe",
    "python.linting.enabled": true,
    "python.linting.flake8Enabled": true,
    "python.formatting.provider": "black",
    "python.testing.pytestEnabled": true,
    "editor.formatOnSave": true,
    "files.exclude": {
        "**/__pycache__": true,
        "**/*.pyc": true
    }
}
```

### Recommended Extensions

- Python (ms-python.python)
- Pylance (ms-python.vscode-pylance)
- PostgreSQL (ckolkman.vscode-postgres)
- GitLens (eamodio.gitlens)
- Better Comments (aaron-bond.better-comments)

## Next Steps

After completing setup:

1. **Test Data Download**:
   ```cmd
   python scripts/download_historical.py
   ```

2. **Verify Data in Database**:
   ```cmd
   psql -U trading_user -d trading_ai
   SELECT COUNT(*) FROM market_data;
   ```

3. **Run First Backtest** (once implemented):
   ```cmd
   python scripts/run_backtest.py
   ```

## Maintenance

### Updating Dependencies

```cmd
# Activate venv
venv\Scripts\activate

# Update all packages
pip install --upgrade -r requirements.txt

# Update requirements.txt
pip freeze > requirements.txt
```

### Database Backup

```cmd
# Backup database
pg_dump -U trading_user -d trading_ai > backup.sql

# Restore database
psql -U trading_user -d trading_ai < backup.sql
```

### Clean Project

```cmd
# Remove cache files
python -c "import pathlib; [p.unlink() for p in pathlib.Path('.').rglob('*.pyc')]"

# Remove __pycache__ directories
python -c "import pathlib, shutil; [shutil.rmtree(p) for p in pathlib.Path('.').rglob('__pycache__')]"
```

## Getting Help

If you encounter issues:

1. Check this setup guide
2. Review error messages carefully
3. Check PostgreSQL and Python logs
4. Verify environment variables in .env
5. Ensure virtual environment is activated

---

**Document Version**: 1.0
**Last Updated**: January 2025
**Platform**: Windows 10/11 with VS Code
